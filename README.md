# Deploying a Vite App on Ubuntu Server with GitHub Actions

This repository contains configurations and workflows to deploy a Vite app on an Ubuntu server using GitHub Actions. The setup includes SSH configuration, reverse proxy setup, Docker, and workflow automation.

## Deployment Steps

### 1. Server Setup
- **Set up SSH**: Ensure the server allows SSH connections.
- **Add SSH Key in GitHub Secrets**: Store the private key securely under `DEPLOY_SSH_KEY` in GitHub Actions secrets.
- **Configure Reverse Proxy**: Nginx or another reverse proxy is set up to direct traffic to the Vite app.
- **Docker Setup**: The repository contains a `Dockerfile` to containerize the application.

### 2. GitHub Actions Workflow
- The workflow automates the deployment process.
- It pulls the latest code, builds the Docker image, and runs the container.
- It ensures the correct branch (`deployment` in this case) is cloned.

## Common Issues & Fixes

### 1. `sudo` Access for `mkdir`
If `mkdir` fails due to permission issues, ensure you use:
```sh
sudo mkdir /path/to/directory
```

### 2. Copying `.env` File Requires `sudo`
When copying the `.env` file, you may need:
```sh
sudo cp .env /path/to/deployment
```
Ensure the target directory has proper permissions.

### 3. Directory Not Found Issues
If a directory does not exist, create it before copying files:
```sh
mkdir -p /path/to/deployment
```
Use `-p` to avoid errors if the directory already exists.

### 4. Incorrect Git Branch Cloned
Since the deployment is on the `deployment` branch, but Git clones the default `main` branch:
- **Fix in Workflow:** Specify the correct branch in GitHub Actions:
  ```yaml
  - name: Clone repository
    run: git clone --branch deployment git@github.com:your-repo.git
  ```
- **Fix on Server:** Change the branch manually:
  ```sh
  git checkout deployment
  ```

### 5. Docker Ignores the Wrong Code
Since the incorrect branch was cloned, Docker ignored the wrong code. Ensure the proper branch is used when pulling the repository.

## Conclusion
With this setup, your Vite app is deployed smoothly using GitHub Actions. Ensure proper permissions, branch configurations, and environment settings to avoid common deployment issues.

### Generated by chatGPT based on my prompt